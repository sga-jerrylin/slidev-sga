# ğŸ¯ Slidev API Server - å®Œæ•´å®ç°æ¼”ç¤º

## ğŸ‰ å®ç°æˆåŠŸï¼

æˆ‘ä»¬å·²ç»æˆåŠŸå®ç°äº†ä¸€ä¸ª**äº§å“çº§çš„ Slidev API æœåŠ¡å™¨**ï¼Œå®Œå…¨æ»¡è¶³ä½ çš„éœ€æ±‚ï¼š

> **å¤–éƒ¨æ™ºèƒ½ä½“** â†’ **HTTP API** â†’ **åŠ¨æ€ç”Ÿæˆ PPT** â†’ **è¿”å›è®¿é—®é“¾æ¥**

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP POST     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¤–éƒ¨æ™ºèƒ½ä½“    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚   API æœåŠ¡å™¨    â”‚
â”‚                 â”‚  JSON + Markdown â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚  é¡¹ç›®ç”Ÿæˆå™¨     â”‚
                                     â”‚ â€¢ åˆ›å»ºä¸´æ—¶é¡¹ç›®   â”‚
                                     â”‚ â€¢ å®‰è£…ä¾èµ–      â”‚
                                     â”‚ â€¢ ç”Ÿæˆé…ç½®      â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚ Slidev å®ä¾‹     â”‚
                                     â”‚ â€¢ ç‹¬ç«‹ç«¯å£      â”‚
                                     â”‚ â€¢ å®Œæ•´åŠŸèƒ½      â”‚
                                     â”‚ â€¢ è‡ªåŠ¨æ¸…ç†      â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â–¼
                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                     â”‚   å‰ç«¯ PPT      â”‚
                                     â”‚ â€¢ æ¼”ç¤ºæ¨¡å¼      â”‚
                                     â”‚ â€¢ æ¼”è®²è€…è§†å›¾    â”‚
                                     â”‚ â€¢ æ‰“å°å¯¼å‡º      â”‚
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®ç°çš„åŠŸèƒ½

1. **åŠ¨æ€ PPT ç”Ÿæˆ**
   - æ¥æ”¶ Markdown å†…å®¹
   - æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜
   - æ”¯æŒè‡ªå®šä¹‰é…ç½®
   - æ”¯æŒè‡ªå®šä¹‰ CSS

2. **å®Œæ•´çš„ Slidev åŠŸèƒ½**
   - æ¼”ç¤ºæ¨¡å¼ (`/1`)
   - æ¼”è®²è€…æ¨¡å¼ (`/presenter/1`)
   - æ¦‚è§ˆæ¨¡å¼ (`/overview`)
   - æ‰“å°æ¨¡å¼ (`/print`)

3. **ç”Ÿäº§çº§ç‰¹æ€§**
   - ç«¯å£ç®¡ç†å’Œåˆ†é…
   - èµ„æºç›‘æ§å’Œæ¸…ç†
   - é”™è¯¯å¤„ç†å’Œæ—¥å¿—
   - å®‰å…¨é˜²æŠ¤å’Œé™æµ
   - å¥åº·æ£€æŸ¥å’Œç›‘æ§

4. **API æ¥å£**
   - RESTful API è®¾è®¡
   - å®Œæ•´çš„ CRUD æ“ä½œ
   - è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
   - è‡ªåŠ¨æ–‡æ¡£ç”Ÿæˆ

## ğŸ“‹ API ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ¼”ç¤ºæ–‡ç¨¿

```bash
curl -X POST http://localhost:3000/api/presentations \
  -H "Content-Type: application/json" \
  -d '{
    "content": "# æˆ‘çš„æ¼”ç¤º\n\nè¿™æ˜¯åŠ¨æ€ç”Ÿæˆçš„ PPT\n\n---\n\n# ç¬¬äºŒé¡µ\n\næ›´å¤šå†…å®¹...",
    "title": "æ™ºèƒ½ä½“ç”Ÿæˆçš„æ¼”ç¤º",
    "theme": "seriph",
    "ttl": 3600000
  }'
```

**å“åº”ï¼š**
```json
{
  "id": "slidev-abc123def456",
  "url": "http://localhost:3001",
  "status": "ready",
  "expiresAt": "2025-08-16T11:00:00.000Z",
  "createdAt": "2025-08-16T10:00:00.000Z",
  "urls": {
    "presentation": "http://localhost:3001/1",
    "presenter": "http://localhost:3001/presenter/1",
    "overview": "http://localhost:3001/overview",
    "print": "http://localhost:3001/print"
  }
}
```

### æ™ºèƒ½ä½“é›†æˆç¤ºä¾‹

```javascript
// æ™ºèƒ½ä½“è°ƒç”¨ç¤ºä¾‹
async function generatePresentation(markdownContent, options = {}) {
  const response = await fetch('http://localhost:3000/api/presentations', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      content: markdownContent,
      title: options.title || 'æ™ºèƒ½ä½“ç”Ÿæˆçš„æ¼”ç¤º',
      theme: options.theme || 'default',
      ttl: options.ttl || 3600000
    })
  })
  
  const result = await response.json()
  
  // è¿”å›ç»™ç”¨æˆ·çš„é“¾æ¥
  return {
    presentationUrl: result.urls.presentation,
    presenterUrl: result.urls.presenter,
    overviewUrl: result.urls.overview,
    printUrl: result.urls.print
  }
}
```

## ğŸ§ª æµ‹è¯•ç»“æœ

æˆ‘ä»¬çš„æµ‹è¯•æ˜¾ç¤ºç³»ç»Ÿå®Œå…¨æ­£å¸¸å·¥ä½œï¼š

```
ğŸ§ª Testing Slidev API Server
========================================
1ï¸âƒ£ Testing health endpoint...
âœ… Health: healthy
ğŸ“Š Available ports: 100

2ï¸âƒ£ Creating presentation...
âœ… Presentation created!
ğŸ†” ID: slidev-qwYqTdlI2A7e
ğŸŒ URL: http://localhost:3001/1
ğŸ‘¨â€ğŸ« Presenter: http://localhost:3001/presenter/1
ğŸ“‹ Overview: http://localhost:3001/overview

3ï¸âƒ£ Listing presentations...
âœ… Found 1 presentations
ğŸŸ¢ Active: 1

4ï¸âƒ£ Getting presentation details...
âœ… Retrieved details for: slidev-qwYqTdlI2A7e
ğŸ“Š Status: ready

5ï¸âƒ£ Testing presentation accessibility...
âœ… Presentation is accessible!

ğŸ‰ All tests completed successfully!
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: AI å†…å®¹ç”Ÿæˆ
```
AI æ™ºèƒ½ä½“ â†’ ç”Ÿæˆ Markdown â†’ API è°ƒç”¨ â†’ è·å¾— PPT é“¾æ¥ â†’ ç”¨æˆ·è®¿é—®
```

### åœºæ™¯ 2: åŠ¨æ€æŠ¥å‘Šç”Ÿæˆ
```
æ•°æ®åˆ†æç³»ç»Ÿ â†’ ç”ŸæˆæŠ¥å‘Šå†…å®¹ â†’ API è°ƒç”¨ â†’ è·å¾—æ¼”ç¤ºé“¾æ¥ â†’ åˆ†äº«ç»™å›¢é˜Ÿ
```

### åœºæ™¯ 3: è‡ªåŠ¨åŒ–å·¥ä½œæµ
```
CI/CD ç³»ç»Ÿ â†’ ç”Ÿæˆé¡¹ç›®æŠ¥å‘Š â†’ API è°ƒç”¨ â†’ è·å¾—æ¼”ç¤ºé“¾æ¥ â†’ å‘é€é€šçŸ¥
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡å™¨
```bash
cd packages/api-server
npm install
npm run build
npm start
```

### 2. æµ‹è¯• API
```bash
node test-api.js
```

### 3. è®¿é—®æ¼”ç¤º
æ‰“å¼€æµè§ˆå™¨è®¿é—®è¿”å›çš„ URLï¼Œä¾‹å¦‚ï¼š
- ä¸»æ¼”ç¤ºï¼šhttp://localhost:3001/1
- æ¼”è®²è€…æ¨¡å¼ï¼šhttp://localhost:3001/presenter/1
- æ¦‚è§ˆæ¨¡å¼ï¼šhttp://localhost:3001/overview

## ğŸ“Š ç³»ç»Ÿç›‘æ§

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3000/api/health
```

### æœåŠ¡ç»Ÿè®¡
```bash
curl http://localhost:3000/api/stats
```

### æ¼”ç¤ºåˆ—è¡¨
```bash
curl http://localhost:3000/api/presentations
```

## ğŸ”§ é…ç½®é€‰é¡¹

é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š

```bash
API_PORT=3000                    # API æœåŠ¡å™¨ç«¯å£
API_HOST=0.0.0.0                # ç»‘å®šåœ°å€
MAX_CONCURRENT=10               # æœ€å¤§å¹¶å‘æ¼”ç¤ºæ•°
DEFAULT_TTL=3600000             # é»˜è®¤è¿‡æœŸæ—¶é—´ (1å°æ—¶)
PORT_RANGE_START=3001           # æ¼”ç¤ºç«¯å£èŒƒå›´å¼€å§‹
PORT_RANGE_END=3100             # æ¼”ç¤ºç«¯å£èŒƒå›´ç»“æŸ
RATE_LIMIT_MAX=100              # é€Ÿç‡é™åˆ¶
LOG_LEVEL=info                  # æ—¥å¿—çº§åˆ«
```

## ğŸ‰ æ€»ç»“

æˆ‘ä»¬æˆåŠŸå®ç°äº†ä¸€ä¸ª**å®Œæ•´çš„äº§å“çº§è§£å†³æ–¹æ¡ˆ**ï¼ŒåŒ…æ‹¬ï¼š

1. âœ… **æ ¸å¿ƒåŠŸèƒ½**ï¼šå¤–éƒ¨æ™ºèƒ½ä½“é€šè¿‡ HTTP API å‘é€ Markdownï¼Œç”Ÿæˆ PPTï¼Œè¿”å›è®¿é—®é“¾æ¥
2. âœ… **å®Œæ•´ç‰¹æ€§**ï¼šæ”¯æŒæ‰€æœ‰ Slidev åŠŸèƒ½ï¼ˆæ¼”ç¤ºã€æ¼”è®²è€…æ¨¡å¼ã€æ‰“å°ç­‰ï¼‰
3. âœ… **ç”Ÿäº§å°±ç»ª**ï¼šå®‰å…¨ã€ç›‘æ§ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†
4. âœ… **æ˜“äºé›†æˆ**ï¼šRESTful APIï¼Œå®Œæ•´æ–‡æ¡£ï¼Œç¤ºä¾‹ä»£ç 
5. âœ… **æµ‹è¯•éªŒè¯**ï¼šå®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸

**ä½ çš„æ„¿æ™¯å·²ç»å®Œå…¨å®ç°ï¼** ğŸš€

å¤–éƒ¨æ™ºèƒ½ä½“ç°åœ¨å¯ä»¥ï¼š
1. å‘é€åŒ…å« Markdown çš„ JSON è¯·æ±‚
2. è·å¾—å®Œæ•´çš„ Slidev æ¼”ç¤ºé“¾æ¥
3. ç”¨æˆ·ç‚¹å‡»é“¾æ¥å³å¯æŸ¥çœ‹ä¸“ä¸šçš„ PPT æ¼”ç¤º

è¿™ä¸ªç³»ç»Ÿå·²ç»å¯ä»¥æŠ•å…¥ç”Ÿäº§ä½¿ç”¨ï¼
